<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tuition Registration Form</title>
    <link rel="stylesheet" href="/CSS/form.css">
</head>

<body>
    <form id="tuition_form" action="/" method="post" class="form">
        <img src="/assets/form logo.png" alt="Jyaasa Creative">
        <h3><span class="A">T</span>uition Class Registration <div class="underline"></div>
        </h3>
        <fieldset>
            <legend>Basic Information</legend>
            <div>
                <label for="tuition_form_no"><b>Form No</b><br><input type="text" id="tuition_form_no"
                        name="tuition_form_no" readonly></label>
                <label for="joining_date"><b>Joining Date</b> <br><input id="joining_date" type="date"></label>
                <label for="preferred_time"><b>Preferred Time</b><br><input type="text" id="preferred_time"
                        name="preferred_time"></label>
                <label for="admission_date"><b>Admission Date</b> <br><input type="date" id="admission_date"
                        name="admission_date"></label>
            </div>
        </fieldset>
        <fieldset>
            <legend>Student Information</legend>
            <div class="student_information">
                <label for="student_name"><b>Student name</b><br><input type="text" id="student_name"
                        name="student_name" required></label>
                <div class="photo-upload">
                    <input type="file" id="photo" name="photo" accept="image/*">
                    <div class="photo-preview">
                        <span>Click to upload a photo</span>
                    </div>
                </div>
                <label for="guardian_name"><b>Guardian's name</b><br><input type="text" id="guardian_name"
                        name="guardian_name" required></label>
                <label for="birthdate"><b>Date of Birth</b> <br><input type="date" id="birthdate"
                        name="birthdate"></label>
                <label for="address"><b>Address</b><br><input type="text" id="address" name="address" required
                        autocomplete="address"></label>
                <div class="options">
                    <span><b>Gender</b></span>
                    <div>
                        <label for="male">
                            <input type="radio" id="male" name="gender" value="male">
                            Male
                        </label>
                        <label for="female">
                            <input type="radio" id="female" name="gender" value="female">
                            Female
                        </label>
                        <label for="other">
                            <input type="radio" id="other" name="gender" value="other">
                            Other
                        </label>
                    </div>
                </div>

                <label for="age" id="label_age" class="hidden"><b>Age</b>
                    <br><input id="age" type="number" name="age" readonly>
                </label>
            </div>
        </fieldset>
        <fieldset>
            <legend>Contact Information</legend>
            <div>
                <label for="mobile_1"><b>Mobile Number 1</b><br><input type="text" id="mobile_1" name="mobile_1"
                        onkeydown="restrictKeys(event);" required></label>
                <label for="mobile_2"><b>Mobile Number 2</b><br><input type="text" id="mobile_2" name="mobile_2"
                        onkeydown="restrictKeys(event);"></label>
                <label for="email_id"><b>Email Address</b><br><input type="email" id="email_id" name="email_id"></label>
            </div>
        </fieldset>
        <fieldset>
            <legend>Educational Background</legend>
            <div>
                <label for="college_name"><b>School/College Name</b><br><input type="text" id="college_name"
                        name="college_name" required></label>
                <label for="college_address"><b>School/College Address</b><br><input type="text" id="college_address"
                        name="college_address" required></label>
            </div>
        </fieldset>
        <fieldset>
            <legend>Course Plan</legend>

            <div>
                <div class="options">
                    <span><b>Class Type</b></span>
                    <div>
                        <label for="regular_class">
                            <input type="radio" id="regular_class" name="class_type" value="regular_class" required>
                            Regular Class (All subjects)
                        </label>
                        <label for="elective_class">
                            <input type="radio" id="elective_class" name="class_type" value="elective_class" required>
                            Dedicated Class
                        </label>
                        <div id="subject_selection" class="hidden">
                            <b>Choose Subjects:</b>
                            <div class="chosen_subjects">
                                <label><input type="checkbox" name="subject" value="Nepali"> Nepali</label>
                                <label><input type="checkbox" name="subject" value="English"> English</label>
                                <label><input type="checkbox" name="subject" value="Maths"> Compulsory Maths</label>
                                <label><input type="checkbox" name="subject" value="Maths"> Optional Maths</label>
                                <label><input type="checkbox" name="subject" value="Science"> Science</label>
                                <label><input type="checkbox" name="subject" value="Science">Computer Science</label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </fieldset>
        <fieldset>
            <legend>Fees</legend>
            <div>
                <label for="admission_fee"><b>Admission Fee</b><br><input type="number" id="admission_fee"
                        name="admission_fee" onkeydown="restrictKeys(event);" required></label>
                <label for="subscription_fee"><b>Subscription Fee</b><br><input type="number" id="subscription_fee"
                        name="college_name" onkeydown="restrictKeys(event);" required></label>
            </div>
        </fieldset>
        <button class="enroll_button" type="submit">Enroll</button>
    </form>
    <script src="/JS/form.js"></script>
    <script src="/JS/tuition_form.js"></script>
    <script>
        document.getElementById('tuition_form').addEventListener('submit', function (event) {
            event.preventDefault();
            var formData = new FormData();
            formData.append('tuition_form_no', document.getElementById('tuition_form_no').value);
            formData.append('joining_date', document.getElementById('joining_date').value);
            formData.append('preferred_time', document.getElementById('preferred_time').value);
            formData.append('admission_date', document.getElementById('admission_date').value);
            formData.append('student_name', document.getElementById('student_name').value);
            formData.append('guardian_name', document.getElementById('guardian_name').value);
            formData.append('birthdate', document.getElementById('birthdate').value);
            formData.append('age', document.getElementById('age').value);
            formData.append('address', document.getElementById('address').value);
            formData.append('gender', document.querySelector('input[name="gender"]:checked').value);
            formData.append('mobile_1', document.getElementById('mobile_1').value);
            formData.append('mobile_2', document.getElementById('mobile_2').value);
            formData.append('email_id', document.getElementById('email_id').value);
            formData.append('college_name', document.getElementById('college_name').value);
            formData.append('college_address', document.getElementById('college_address').value);
            formData.append('class_type', document.querySelector('input[name="class_type"]:checked').value);
            const selectedSubjects = document.querySelectorAll('input[name="subject"]:checked');
            if (selectedSubjects.length > 0) {
                selectedSubjects.forEach(subject => {
                    formData.append('chosen_subjects[]', subject.value);
                });
            } else {
                formData.append('chosen_subjects', 'none');
            }
            formData.append('admission_fee', document.getElementById('admission_fee').value);
            formData.append('subscription_fee', document.getElementById('subscription_fee').value);
            formData.forEach(function (value, key) {
                console.log(key + ': ' + value);
            });
            fetch('/api/tuition', {
                method: 'POST',
                body: formData,
            })
                .then(response => response.json())
                .then(data => {
                    console.log("Success", data);
                    console.log("formData: ", formData);
                })
                .catch((error) => {
                    console.error('Error:', error);
                });
        })

    </script>
</body>

</html>